<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mex-Span AI Tech Localization Drill</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #16a34a;
            --error: #dc2626;
            --bg: #f3f4f6;
            --card: #ffffff;
            --text: #1f2937;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; color: var(--primary); }
        p.subtitle { color: #6b7280; font-size: 0.9rem; }

        .card {
            background: var(--card);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        /* ANIMATION ADDED HERE */
        .fade-in {
            animation: fade 0.4s ease-out;
        }
        
        @keyframes fade {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MENU STYLES */
        .level-menu {
            display: grid;
            gap: 15px;
        }
        
        .level-btn {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 20px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .level-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .level-desc {
            font-size: 0.8rem;
            font-weight: 400;
            opacity: 0.8;
            margin-top: 4px;
            text-align: left;
        }

        /* QUIZ STYLES */
        .quiz-interface { display: none; }

        .progress {
            margin-bottom: 20px;
            font-size: 0.85rem;
            color: #6b7280;
            display: flex;
            justify-content: space-between;
        }

        .category-tag {
            display: inline-block;
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 12px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .english-term {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .context-hint {
            font-style: italic;
            color: #6b7280;
            font-size: 0.95rem;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        button.option-btn {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            color: var(--text);
            font-weight: 500;
        }

        button.option-btn:hover {
            border-color: var(--primary);
            background-color: #eff6ff;
        }

        button.option-btn.correct {
            background-color: #dcfce7;
            border-color: var(--success);
            color: var(--success);
        }

        button.option-btn.wrong {
            background-color: #fee2e2;
            border-color: var(--error);
            color: var(--error);
        }

        .feedback-area {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            display: none;
        }

        .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .next-btn:hover { background: #1d4ed8; }
        
        .home-btn {
            background: transparent;
            color: #6b7280;
            border: none;
            margin-top: 10px;
            cursor: pointer;
            text-decoration: underline;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>L10n Trainer: US Spanish/Mexico</h1>
        <p class="subtitle">Select your difficulty level</p>
    </header>

    <div class="card" id="main-card">
        
        <div id="menu" class="level-menu fade-in">
            <button class="level-btn" onclick="startLevel(1)">
                <div style="text-align: left;">
                    Level 1: Basic Terminology
                    <div class="level-desc">Single words & Buttons (Submit, Save, Cloud)</div>
                </div>
                <span>➔</span>
            </button>
            
            <button class="level-btn" onclick="startLevel(2)">
                <div style="text-align: left;">
                    Level 2: UX Phrases
                    <div class="level-desc">Friction, Onboarding, and Errors</div>
                </div>
                <span>➔</span>
            </button>
        </div>

        <div id="quiz" class="quiz-interface">
            </div>
        
    </div>
</div>

<script>
    // --- DATABASE 1: BASICS ---
    const dataLevel1 = [
        { en: "Submit", es: "Enviar", alt: ["Entregar", "Someter", "Aceptar"], cat: "UI Buttons", hint: "Button context: Sending a form" },
        { en: "Save", es: "Guardar", alt: ["Salvar", "Ahorrar", "Mantener"], cat: "UI Buttons", hint: "Preserving data/files" },
        { en: "Cancel", es: "Cancelar", alt: ["Anular", "Borrar", "Detener"], cat: "UI Buttons", hint: "Stop an action" },
        { en: "Log in", es: "Iniciar sesión", alt: ["Loguearse", "Entrar", "Acceder"], cat: "Authentication", hint: "Standard Google/FB term in LatAm" },
        { en: "Log out", es: "Cerrar sesión", alt: ["Salir", "Desloguearse", "Terminar"], cat: "Authentication", hint: "Ending a session" },
        { en: "Download", es: "Descargar", alt: ["Bajar", "Cargar", "Obtener"], cat: "Actions", hint: "Getting a file from internet" },
        { en: "Settings", es: "Configuración", alt: ["Ajustes", "Opciones", "Seteo"], cat: "UI Navigation", hint: "Menu for changing preferences" },
        { en: "Computer", es: "La computadora", alt: ["El ordenador", "El computador", "La máquina"], cat: "Hardware", hint: "General term (Mexico/LatAm)" },
        { en: "Laptop", es: "La laptop", alt: ["El ordenador portátil", "La libreta", "El portátil"], cat: "Hardware", hint: "Portable computer" },
        { en: "Mouse", es: "El ratón", alt: ["El mouse", "El apuntador", "El deslizador"], cat: "Hardware", hint: "Pointing device" },
        { en: "The Cloud", es: "La nube", alt: ["El cielo", "El servidor", "La red"], cat: "Internet", hint: "Remote storage" }
    ];

    // --- DATABASE 2: HARDER PHRASES ---
    const dataLevel2 = [
        { en: "We’re having trouble completing your request.", es: "Hubo un problema al completar tu solicitud.", alt: ["Tenemos problemas para completar tu solicitud.", "Estamos teniendo fallas con tu petición.", "Tu solicitud no se completó por nuestra culpa."], cat: "Friction Message", hint: "Passive voice is preferred over 'We have problems'" },
        { en: "Your results may vary while the model is adapting.", es: "Los resultados pueden variar mientras el modelo aprende.", alt: ["Tus resultados pueden cambiar mientras el modelo se adapta.", "Resultados diferentes mientras la IA cambia.", "El modelo está variando tus resultados."], cat: "AI/ML", hint: "Use 'Aprende' (Learns) for AI, and avoid possessive 'Tus' for generic results." },
        { en: "Allow access to your microphone for this feature to work?", es: "¿Permites el acceso al micrófono para usar esta función?", alt: ["¿Permites el acceso a tu micrófono para que esta función funcione?", "¿Das permiso al micro para que sirva?", "¿Habilitar micrófono para funcionalidad?"], cat: "Permissions", hint: "Avoid the cacophony of 'función funcione'." },
        { en: "Choose the options that apply to you.", es: "Elige las opciones que apliquen en tu caso.", alt: ["Elige las opciones que apliquen para ti.", "Escoge lo que te aplica.", "Selecciona opciones para ti."], cat: "Onboarding", hint: "'Apply to you' is an Anglicism. Use 'In your case'." },
        { en: "If the problem continues, contact support.", es: "Si el problema persiste, contacta a soporte.", alt: ["Si el problema continúa, habla con el soporte.", "Si sigue el error, llama a ayuda.", "De continuar el problema, contactar servicio."], cat: "Support", hint: "Use 'Persiste' for professional tone." },
        { en: "The file format isn’t supported.", es: "El formato del archivo no es admitido.", alt: ["El formato del archivo no es compatible.", "No soportamos este archivo.", "Archivo con formato malo."], cat: "System Error", hint: "OS level usually uses 'Admitido' over 'Compatible' for file types." }
    ];

    let currentDB = [];
    let currentQ = 0;
    let score = 0;

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    // FUNCTION TO SHOW THE MENU
    function showMenu() {
        const menu = document.getElementById('menu');
        const quiz = document.getElementById('quiz');
        
        quiz.style.display = 'none';
        menu.style.display = 'grid';
        
        // Trigger animation replay for menu
        menu.classList.remove('fade-in');
        void menu.offsetWidth; // trigger reflow
        menu.classList.add('fade-in');
    }

    function startLevel(level) {
        // 1. Select Database
        if(level === 1) currentDB = shuffle([...dataLevel1]);
        else currentDB = shuffle([...dataLevel2]);

        // 2. Reset Stats
        currentQ = 0;
        score = 0;

        // 3. Rebuild UI Structure (Important because "End Screen" wipes it)
        const quizDiv = document.getElementById('quiz');
        quizDiv.innerHTML = `
            <div class="progress">
                <span id="score">Score: 0</span>
                <span id="counter">1 / ${currentDB.length}</span>
            </div>
            <div class="term-display">
                <span class="category-tag" id="category"></span>
                <div class="english-term" id="question"></div>
                <div class="context-hint" id="context"></div>
            </div>
            <div class="options-grid" id="options"></div>
            <div class="feedback-area" id="feedback">
                <div id="explanation" style="margin-bottom:10px;"></div>
                <button class="next-btn" onclick="nextQuestion()">Next</button>
            </div>
            <button class="home-btn" onclick="showMenu()">Back to Menu</button>
        `;

        // 4. Toggle Visibility & Animate
        document.getElementById('menu').style.display = 'none';
        quizDiv.style.display = 'block';
        
        // Reset and trigger animation
        quizDiv.classList.remove('fade-in');
        void quizDiv.offsetWidth; // trigger reflow
        quizDiv.classList.add('fade-in');

        // 5. Load First Question
        loadQuestion();
    }

    function loadQuestion() {
        const item = currentDB[currentQ];
        
        document.getElementById('counter').innerText = `${currentQ + 1} / ${currentDB.length}`;
        document.getElementById('category').innerText = item.cat;
        document.getElementById('question').innerText = item.en;
        document.getElementById('context').innerText = item.hint;
        document.getElementById('feedback').style.display = 'none';

        let choices = [{txt: item.es, isCorrect: true}];
        item.alt.forEach(alt => choices.push({txt: alt, isCorrect: false}));
        choices = shuffle(choices);

        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = ''; 

        choices.forEach(choice => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = choice.txt;
            btn.onclick = () => checkAnswer(btn, choice.isCorrect, item.es);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect, correctAnswer) {
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        const feedbackArea = document.getElementById('feedback');
        const explanation = document.getElementById('explanation');
        feedbackArea.style.display = 'block';

        if (isCorrect) {
            btn.classList.add('correct');
            explanation.innerHTML = `<strong>Correct!</strong> <br>"${correctAnswer}" is the standard.`;
            score++;
            document.getElementById('score').innerText = `Score: ${score}`;
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                if(b.innerText === correctAnswer) b.classList.add('correct');
            });
            explanation.innerHTML = `<strong>Incorrect.</strong> <br>Standard use is: "${correctAnswer}".`;
        }
    }

    function nextQuestion() {
        currentQ++;
        if (currentQ < currentDB.length) {
            loadQuestion();
        } else {
            // End of Quiz Screen
            const quizDiv = document.getElementById('quiz');
            // Trigger animation for end screen
            quizDiv.classList.remove('fade-in');
            void quizDiv.offsetWidth;
            quizDiv.classList.add('fade-in');

            quizDiv.innerHTML = `
                <h2>Level Complete!</h2>
                <p>Final Score: ${score} / ${currentDB.length}</p>
                <div style="margin-top:20px;">
                    <button class="next-btn" onclick="startLevel(${currentDB === dataLevel1 ? 1 : 2})">Replay Level</button>
                    <br><br>
                    <button class="next-btn" style="background:#4b5563" onclick="showMenu()">Choose Another Level</button>
                </div>
            `;
        }
    }
</script>

</body>
</html>